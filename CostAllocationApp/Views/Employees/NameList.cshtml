@{ ViewBag.Title = "Name List"; }

<div class="content container-fluid">
    <div id="name_list_body">
        <div class="row">
            <div class="col-md-12">
                <div>
                    <section class="container" tabIndex="1">
                        <div>
                            <table>
                                <thead>
                                    <tr class="master_setting_popup">
                                        <th class="name_list_th name"><a class="" href="/Employees/Nameregistration" target="_blank">Name Reg.</a></th>
                                        <th class="name_list_th section">
                                            <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#section_registration">Section Reg.</a>
                                        </th>
                                        <th class="name_list_th department">
                                            <a class="" id="department_modal_href" href="javascript:void(0);" data-toggle="modal" data-target="#department_registration">Dept Reg.</a>
                                        </th>
                                        <th class="name_list_th incharge">
                                            <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#in-charge_registration">In-Charge Reg.</a>
                                        </th>
                                        <th class="name_list_th role">
                                            <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#role_registration_modal">Role Reg.</a>
                                        </th>
                                        <th class="name_list_th explanation">
                                            <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#explanation_modal">Explanation Reg.</a>
                                        </th>
                                        <th class="name_list_th company">
                                            <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#company_reg_modal" style="margin-left:185px;">Com. Reg.</a>
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <table class="namelist_tbl" id="name-list">
                            <thead class="name_list_table_header">

                                <tr id="namelist_tbl_header">
                                    <th id="name_list_name">Name <i class="fa fa-sort-amount-asc" id="name_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="name_desc" aria-hidden="true"></i></th>
                                    <th id="name_list_section">Section <i class="fa fa-sort-amount-asc" id="section_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="section_desc" aria-hidden="true"></i></th>
                                    <th id="name_list_department">Department <i class="fa fa-sort-amount-asc" id="department_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="department_desc" aria-hidden="true"></i></th>
                                    <th id="name_list_incharge">In-Charge <i class="fa fa-sort-amount-asc" id="incharge_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="incharge_desc" aria-hidden="true"></i></th>
                                    <th id="name_list_role">Role <i class="fa fa-sort-amount-asc" id="role_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="role_desc" aria-hidden="true"></i></th>
                                    <th id="name_list_explanation">Explanation <i class="fa fa-sort-amount-asc" id="explanation_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="explanation_desc" aria-hidden="true"></i></th>
                                    <th id="name_list_company">Company Name <i class="fa fa-sort-amount-asc" id="company_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="company_desc" aria-hidden="true"></i></th>
                                    <th id="name_list_grade">Grade <i class="fa fa-sort-amount-asc" id="grade_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="grade_desc" aria-hidden="true"></i></th>
                                    <th id="name_list_unit" style="width:67px !important">Unit Price <i class="fa fa-sort-amount-asc" id="unit_asc" aria-hidden="true"></i><i class="fa fa-sort-amount-desc" style="display:none;" id="unit_desc" aria-hidden="true"></i></th>
                                    <th style="">Action</th>
                                </tr>
                                @*<tr id="namelist_tbl_search" style="line-height:2;">*@
                                <tr id="namelist_tbl_search">

                                    <th class="namelist_td name"><input type="text" value="" id="name_search" style="border: 1px solid black; width:159px;" /></th>

                                    <th class="namelist_td section">

                                        <div class="multiselect">
                                            <div class="selectBox section" id="section_click" onclick="SectionCheck()">
                                                <select>
                                                    <option>All</option>
                                                </select>
                                                <div class="overSelect"></div>
                                            </div>

                                            <div id="sectionChks" class="commonselect">

                                            </div>
                                        </div>
                                    </th>

                                    <th class="namelist_td department">
                                        <div class="multiselect">
                                            <div class="selectBox department" onclick="DepartmentCheck()">
                                                <select>
                                                    <option>All</option>
                                                </select>
                                                <div class="overSelect"></div>
                                            </div>
                                            <div id="departmentChks" class="commonselect">

                                            </div>
                                        </div>
                                    </th>
                                    <th class="namelist_td incharge">
                                        <div class="multiselect">
                                            <div class="selectBox incharge" onclick="InchargeCheck()">
                                                <select>
                                                    <option>All</option>
                                                </select>
                                                <div class="overSelect"></div>
                                            </div>
                                            <div id="inchargeChks" class="commonselect">

                                            </div>
                                        </div>
                                    </th>
                                    <th class="namelist_td role">
                                        <div class="multiselect">
                                            <div class="selectBox role" onclick="RoleCheck()">
                                                <select>
                                                    <option>All</option>
                                                </select>
                                                <div class="overSelect"></div>
                                            </div>
                                            <div id="RoleChks" class="commonselect">

                                            </div>
                                        </div>
                                    </th>
                                    <th class="namelist_td explanation">
                                        <div class="multiselect">
                                            <div class="selectBox explanation" onclick="ExplanationCheck()">
                                                <select>
                                                    <option>All</option>
                                                </select>
                                                <div class="overSelect"></div>
                                            </div>
                                            <div id="ExplanationChks" class="commonselect">

                                            </div>
                                        </div>
                                    </th>
                                    <th class="namelist_td company">
                                        <div class="multiselect">
                                            <div class="selectBox company" onclick="CompanyCheck()">
                                                <select>
                                                    <option>All</option>
                                                </select>
                                                <div class="overSelect"></div>
                                            </div>
                                            <div id="CompanyChks" class="commonselect">

                                            </div>
                                        </div>
                                    </th>
                                    <th>

                                    </th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>

                            <tbody class="namelist_listbody" id="employee_list_search_results"></tbody>
                        </table>
                    </section>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal Add Name -->
<div class="modal fade" id="modal_add_name" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Name</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="col-12 modal-body">
                <table id="add_name_table_2">
                    <thead>
                        <tr id="main_head">
                            <th>SL</th>
                            <th>Name</th>
                            <th>Sub Code</th>
                            <th>Memo</th>
                            <th>Section</th>
                            <th>Department</th>
                            <th>In-Charge</th>
                            <th>Role</th>
                            <th>Explanation</th>
                            <th>Company</th>
                            <th>Grade</th>
                            <th>Unit Price</th>
                            <th>Action <input type="hidden" value="" id="fixed_hidden_name" /></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div class="add_name_tbl_2_btn">
                    <a href="javascript:void(0);" class="" id="add_name_cancel" data-dismiss="modal">Cancel</a>
                    <a href="javascript:void(0);" class="" id="add_name_add" onclick="onSave()">Save</a>
                </div>
            </div>
        </div>
    </div>
    <input type="hidden" id="add_name_unit_price_hidden" />
    <input type="hidden" id="add_name_row_no_hidden" />
</div>
<!-- Modal Add Name (New) -->
<div class="modal fade" id="modal_add_name_new" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Name Registration</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="col-12 modal-body">
                <table id="add_name_table_new">
                    <thead>
                        <tr>
                            <th class="name_list_th"></th>
                            <th class="name_list_th"></th>
                            <th class="name_list_th">
                                <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#section_registration">Section Reg.</a>
                            </th>
                            <th class="name_list_th">
                                <a class="" id="department_modal_href" href="javascript:void(0);" data-toggle="modal" data-target="#department_registration">Dept Reg.</a>
                            </th>
                            <th class="name_list_th">
                                <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#in-charge_registration">In-Charge Reg.</a>
                            </th>
                            <th class="name_list_th">
                                <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#role_registration_modal">Role Reg.</a>
                            </th>
                            <th class="name_list_th">
                                <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#explanation_modal">Explanation Reg.</a>
                            </th>
                            <th class="name_list_th">
                                <a class="" href="javascript:void(0);" data-toggle="modal" data-target="#company_reg_modal">Com. Reg.</a>
                            </th>
                        </tr>
                        <tr>
                            <th>Name</th>
                            <th>Memo</th>
                            <th>Section</th>
                            <th>Department</th>
                            <th>In-Charge</th>
                            <th>Role</th>
                            <th>Explanation</th>
                            <th>Company</th>
                            <th>Grade</th>
                            <th>Unit Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <input type="text" class="col-12" id="identity_new" placeholder="name">
                            </td>

                            <td>
                                <input type="text" class="col-12" id="memo_new" placeholder="memo">
                            </td>
                            <td>
                                <select id="section_new" class="col-12"></select>
                            </td>
                            <td>
                                <select id="department_new" class="col-12"></select>
                            </td>
                            <td>
                                <select id="incharge_new" class="col-12"></select>
                            </td>
                            <td>
                                <select id="role_new" class="col-12"></select>
                            </td>
                            <td>
                                <select id="explanation_new" class="col-12"></select>
                            </td>
                            <td>
                                <select id="company_new" class="col-12"></select>
                            </td>
                            <td>
                                <input type="text" class="col-12" id="grade_new" placeholder="grade" readonly>
                            </td>
                            <td>
                                <input type="text" class="col-12" id="unitprice_new" placeholder="unit price">
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="add_name_tbl_2_btn">
                    <a href="javascript:void(0);" class="" id="add_name_cancel" data-dismiss="modal">Cancel</a>
                    <a href="javascript:void(0);" class="" id="add_name_add_new">Save</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal Edit Name -->
<div class="modal fade" id="modal_edit_name" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Info of <span id="edit_model_span"></span></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="col-12 modal-body">
                <table id="add_name_table_3">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Memo</th>
                            <th>Section</th>
                            <th>Department</th>
                            <th>In-Charge</th>
                            <th>Role</th>
                            <th>Explanation</th>
                            <th>Company</th>
                            <th>Grade</th>
                            <th>Unit Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            
                                <td>
                                    <input type="text" class="col-12" id="name_edit" value="Chandra Shekhar Das" placeholder="name" readonly>
                                </td>
                            <td>
                                <input type="text" class=" col-12" id="memo_edit" value="" placeholder="">
                            </td>
                            <td>
                                <input type="hidden" value="" id="row_id_hidden_edit" />
                                <select id="section_edit" class=" col-12">
                                    <option value="">Select Section</option>
                                    <option value="" selected>Section-1</option>
                                    <option value="">Section-2</option>
                                    <option value="">Section-3</option>
                                </select>
                            </td>
                            <td>
                                <select id="department_edit" class=" col-12">
                                    <option value="">Select Dept</option>
                                    <option value="" selected>Department-1</option>
                                    <option value="">Department-2</option>
                                    <option value="">Department-3</option>
                                </select>
                            </td>
                            <td>
                                <select id="incharge_edit" class=" col-12">
                                    <option value="">Select In-Charge</option>
                                    <option value="" selected>Work Domain-1</option>
                                    <option value="">Work Domain-2</option>
                                    <option value="">Work Domain-3</option>
                                </select>
                            </td>
                            <td>
                                <select id="role_edit" class=" col-12">
                                    <option value="">Select Role</option>
                                    <option value="" selected>Role-1</option>
                                    <option value="">Role-2</option>
                                    <option value="">Role-3</option>
                                </select>
                            </td>
                            <td>
                                <select id="explanation_edit" class=" col-12">
                                    <option value="">Select Company</option>
                                    <option value="" selected>Company-1</option>
                                    <option value="">Company-2</option>
                                    <option value="">Company-3</option>
                                </select>
                            </td>
                            <td>
                                <select id="company_edit" class=" col-12">
                                    <option value="">Select Company</option>
                                    <option value="" selected>Company-1</option>
                                    <option value="">Company-2</option>
                                    <option value="">Company-3</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" class=" col-12" id="grade_edit" placeholder="" readonly style="background-color: aliceblue;">

                            </td>
                            <td>
                                <input type="text" class=" col-12" id="unitprice_edit" placeholder="unit price">
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="add_name_tbl_3_btn">
                    <a href="javascript:void(0);" class="" id="add_name_cancel" data-dismiss="modal">Cancel</a>
                    <a href="javascript:void(0);" class="" id="add_name_edit">Save</a>
                </div>
            </div>
        </div>
        <input type="hidden" id="grade_edit_hidden" />
        <input type="hidden" id="grade_new_hidden" />

        <input type="hidden" id="page_load_after_modal_close" />
    </div>
</div>

@Html.Partial("_Modals") @section Scripts{
    <script type="text/javascript">
        let previousAssignmentRow = 0;
        let unitPrices = [];

        function loadSingleAssignmentData(id) {

            $.ajax({
                url: '/api/Utilities/AssignmentById/' + id,
                type: 'GET',
                dataType: 'json',
                success: function(assignmentData) {

                    console.log(assignmentData);
                    $('#edit_model_span').html(assignmentData.EmployeeName);
                    $('#name_edit').val(assignmentData.EmployeeName);
                    $('#memo_edit').val(assignmentData.Remarks);
                    $('#row_id_hidden_edit').val(assignmentData.Id);
                    $.getJSON('/api/sections/')
                        .done(function(data) {
                            $('#section_edit').empty();
                            $('#section_edit').append(`<option value=''>Select Section</option>`);
                            $.each(data, function(key, item) {
                                if (item.Id == assignmentData.SectionId) {
                                    $('#section_edit').append(`<option value='${item.Id}' selected>${item.SectionName}</option>`);
                                } else {
                                    $('#section_edit').append(`<option value='${item.Id}'>${item.SectionName}</option>`);
                                }

                            });
                        });

                    $.getJSON(`/api/departments`)
                        .done(function(data) {
                            $('#department_edit').empty();
                            $('#department_edit').append(`<option value=''>Select Department</option>`);
                            $.each(data, function(key, item) {
                                if (item.Id == assignmentData.DepartmentId) {
                                    $('#department_edit').append(`<option value='${item.Id}' selected>${item.DepartmentName}</option>`);
                                } else {
                                    $('#department_edit').append(`<option value='${item.Id}'>${item.DepartmentName}</option>`);
                                }

                            });
                        });

                    $.getJSON('/api/incharges/')
                        .done(function(data) {
                            $('#incharge_edit').empty();
                            $('#incharge_edit').append(`<option value=''>Select In-Charge</option>`);
                            $.each(data, function(key, item) {
                                if (item.Id == assignmentData.InchargeId) {
                                    $('#incharge_edit').append(`<option value='${item.Id}' selected>${item.InChargeName}</option>`);
                                } else {
                                    $('#incharge_edit').append(`<option value='${item.Id}'>${item.InChargeName}</option>`);
                                }

                            });
                        });


                    $.getJSON('/api/Roles/')
                        .done(function(data) {
                            $('#role_edit').empty();
                            $('#role_edit').append(`<option value=''>Select Role</option>`);
                            $.each(data, function(key, item) {
                                if (item.Id == assignmentData.RoleId) {
                                    $('#role_edit').append(`<option value='${item.Id}' selected>${item.RoleName}</option>`);
                                } else {
                                    $('#role_edit').append(`<option value='${item.Id}'>${item.RoleName}</option>`);
                                }

                            });
                        });


                    $.getJSON('/api/Explanations/')
                        .done(function(data) {
                            $('#explanation_edit').empty();
                            $('#explanation_edit').append(`<option value=''>Select Explanation</option>`);
                            $.each(data, function(key, item) {
                                if (item.Id == assignmentData.ExplanationId) {
                                    $('#explanation_edit').append(`<option value='${item.Id}' selected>${item.ExplanationName}</option>`);
                                } else {
                                    $('#explanation_edit').append(`<option value='${item.Id}'>${item.ExplanationName}</option>`);
                                }

                            });
                        });

                    $.getJSON('/api/Companies/')
                        .done(function(data) {
                            $('#company_edit').empty();
                            $('#company_edit').append(`<option value=''>Select Company</option>`);
                            $.each(data, function(key, item) {
                                if (item.Id == assignmentData.CompanyId) {
                                    $('#company_edit').append(`<option value='${item.Id}' selected>${item.CompanyName}</option>`);
                                } else {
                                    $('#company_edit').append(`<option value='${item.Id}'>${item.CompanyName}</option>`);
                                }

                            });
                        });
                    $('#unitprice_edit').val(assignmentData.UnitPrice);
                    if (assignmentData.CompanyName.toLowerCase() == "mw") {
                        $('#grade_edit').val(assignmentData.GradePoint);
                    } else {
                        $('#grade_edit').val("");
                    }
                    $('#grade_edit_hidden').val(assignmentData.GradeId);

                },
                error: function() {
                    //$('#add_name_table_1 tbody').empty();
                }
            });



        }

        function loadSingleAssignmentDataForExistingEmployee(employeeName) {
            $('#add_name_table_2 thead .sub_thead').remove();
            $('#add_name_table_2 tbody').empty();
            $('#add_name_add').css('display', 'inline-block');
            console.log(employeeName);
            $.ajax({
                url: `/api/Utilities/GetEmployeesByName/${employeeName}`,
                type: 'GET',
                async: false,
                dataType: 'json',
                success: function (assignmentData) {
                    console.log(assignmentData);
                    $('#fixed_hidden_name').val(assignmentData[0].EmployeeName);

                    var count = 1;
                    $.each(assignmentData, function (index, item) {
                        // console.log(item);
                        unitPrices.push(item.UnitPrice);
                        previousAssignmentRow = item.SubCode;
                        tr += '<tr class="sub_thead">';
                        tr += `<td>${item.SubCode}</td>`;
                        tr += `<td><input type='text' class=" col-12" style='width: 141px;' value='${item.EmployeeName}' readonly/></td>`;
                        tr += `<td><input type='text' class=" col-12" style='width: 47px;' value='${item.SubCode}' readonly /></td>`;
                        tr += `<td><input type='text' class=" col-12" style='width: 89px;' value='${item.Remarks}' readonly /></td>`;
                        tr += `<td><input type='text' class=" col-12" style='width: 87px;' value='${item.SectionName}' readonly /></td>`;
                        tr += `<td><input type='text' class=" col-12" style='width: 89px;' value='${item.DepartmentName}' readonly /></td>`;
                        tr += `<td><input type='text' class=" col-12" style='width: 89px;' value='${item.InchargeName}' readonly /></td>`;
                        tr += `<td><input type='text' class=" col-12" style='width: 89px;' value='${item.RoleName}' readonly /></td>`;
                        tr += `<td><input type='text' class=" col-12" style='width: 190px;' value='${item.ExplanationName}' readonly /></td>`;
                        tr += `<td><input type='text' class=" col-12" style='width:81px;'   value='${item.CompanyName}' readonly /></td>`;
                        if (item.CompanyName.toLowerCase() == "mw") {
                            tr += `<td><input type='text' class=" col-12" value='${item.GradePoint}' readonly style='width: 55px;' /></td>`;
                        }
                        else {
                            tr += `<td><input type='text' class=" col-12" value='' readonly style='width: 55px;' /></td>`;
                        }
                        tr += `<td><input type='text' class="col-12" id="add_name_unit_price_${count}" style='width: 72px;' value='${item.UnitPrice}' readonly /></td>`;
                        if (count == 1) {
                            $("#unit_price_first_project_hid").val(item.UnitPrice);
                            tr += `<td rowspan='${assignmentData.length}' style='text-align:center;'><a href='javascript:void(0);' onClick="addNew()"> <i class="fa fa-plus" aria-hidden="true"></i></a></td>`;
                        }

                        tr += '</tr>';

                        //console.log(tr);
                        count++;
                        $('#add_name_table_2 thead').append(tr);
                        var tr = "";
                    });

                },
                error: function () {

                }
            });
        }


        function addNew() {
            //
            previousAssignmentRow++;
            var text = `
            <tr data-id="${previousAssignmentRow}" id="row_${previousAssignmentRow}">
                <td>${previousAssignmentRow}</td>
                <td><input class=" col-12" id="identity_row_${previousAssignmentRow}" style='width: 141px;' value="${$('#fixed_hidden_name').val()}" readonly /></td>
                <td><input class="" value="${previousAssignmentRow}"  style='width: 47px;' id='sub_code_row_${previousAssignmentRow}' readonly /></td>
                <td><input class=" col-12" style='width: 89px;' id="memo_row_${previousAssignmentRow}" /></td>`;

            // for add new
            $.ajax({
                url: '/api/Sections/',
                type: 'GET',
                async: false,
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    text += '<td>';
                    text += `
                               <select id="section_row_${previousAssignmentRow}" style='width: 87px;'class=" col-12 section_row" onChange="changeVal(${previousAssignmentRow},this)">
                                    <option value=''>Select Section</option>
                            `;
                    $.each(data, function (key, item) {
                        text += `<option value = '${item.Id}'> ${item.SectionName}</option>`;
                    });
                    text += '</select></td>';
                },
                error: function () {

                }
            });


            text += `
                <td>
                    <select id="department_row_${previousAssignmentRow}" class=" col-12 department_row"></select>
                 </td>
                `;

            $.ajax({
                url: '/api/incharges/',
                type: 'GET',
                async: false,
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    text += '<td>';
                    text += `
                               <select id="incharge_row_${previousAssignmentRow}" class=" col-12">
                                    <option value=''>Select In-Charge</option>
                            `;
                    $.each(data, function (key, item) {
                        text += `<option value = '${item.Id}'> ${item.InChargeName}</option>`;
                    });
                    text += '</select></td>';
                },
                error: function () {

                }
            });

            $.ajax({
                url: '/api/roles/',
                type: 'GET',
                async: false,
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    text += '<td>';
                    text += `
                               <select id="role_row_${previousAssignmentRow}" class=" col-12">
                                    <option value=''>Select Role</option>
                            `;
                    $.each(data, function (key, item) {
                        text += `<option value = '${item.Id}'> ${item.RoleName}</option>`;
                    });
                    text += '</select></td>';
                },
                error: function () {

                }
            });

            $.ajax({
                url: '/api/Explanations/',
                type: 'GET',
                async: false,
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    text += '<td>';
                    text += `
                               <select id="explain_row_${previousAssignmentRow}" style='width: 190px;' class=" col-12">
                                    <option value=''>Select Role</option>
                            `;
                    $.each(data, function (key, item) {
                        text += `<option value = '${item.Id}'> ${item.ExplanationName}</option>`;
                    });
                    text += '</select></td>';
                },
                error: function () {

                }
            });

            $.ajax({
                url: '/api/Companies/',
                type: 'GET',
                async: false,
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    text += '<td>';
                    text += `
                               <select id="company_row_${previousAssignmentRow}" style='width:81px;' class=" col-12 add_company" onchange="LoadGradeValue(this);">
                                    <option value=''>Select Role</option>
                            `;
                    $.each(data, function (key, item) {
                        text += `<option value = '${item.Id}'> ${item.CompanyName}</option>`;
                    });
                    text += '</select></td>';
                },
                error: function () {

                }
            });
            text += `
                 <td><input class=" col-12" id="grade_row_${previousAssignmentRow}" readonly style='width: 55px;'/><input type='hidden' id='grade_row_new_${previousAssignmentRow}' /></td>
                 <td><input class=" col-12" id="unitprice_row_${previousAssignmentRow}" style='width: 72px;' onChange="unitPriceChange(${previousAssignmentRow},this)"/></td>
                 <td style='text-align:center;'><a href='javascript:void(0);' id='remove_row_${previousAssignmentRow}' onClick="removeTr(${previousAssignmentRow})"><i class="fa fa-trash-o" aria-hidden="true"></i></a></td>
            </tr>

            `;

            $(`#remove_row_${previousAssignmentRow - 1}`).css('display', 'none');

            $('#add_name_table_2 tbody').append(text);

        }

        function removeTr(rowId) {
            var rowElement = $('#row_' + rowId);
            rowElement.remove();
            previousAssignmentRow--;
            $(`#remove_row_${previousAssignmentRow}`).css('display', 'block');

        }


        function onSave() {
            const rows = document.querySelectorAll("#add_name_table_2 > tbody > tr");
            //$('#add_name_add').css('display','none');
            console.log(rows);
            $.each(rows, function (index, data) {
                var rowId = data.dataset.id;

                var employeeName = $('#identity_row_' + rowId).val();
                var sectionId = $('#section_row_' + rowId).find(":selected").val();
                var departmentId = $('#department_row_' + rowId).find(":selected").val();
                var inchargeId = $('#incharge_row_' + rowId).find(":selected").val();
                var roleId = $('#role_row_' + rowId).find(":selected").val();
                var companyId = $('#company_row_' + rowId).find(":selected").val();
                var explanationId = $('#explain_row_' + rowId).find(":selected").val();
                var unitPrice = $('#unitprice_row_' + rowId).val();
                var gradeId = $('#grade_row_new_' + rowId).val();
                var remarks = $('#memo_row_' + rowId).val();
                var subCode = $('#sub_code_row_' + rowId).val();



                var data = {
                    EmployeeName: employeeName,
                    SectionId: sectionId,
                    DepartmentId: departmentId,
                    InchargeId: inchargeId,
                    RoleId: roleId,
                    ExplanationId: explanationId,
                    CompanyId: companyId,
                    UnitPrice: unitPrice,
                    GradeId: gradeId,
                    Remarks: remarks,
                    SubCode: subCode,

                };

                console.log(data);

                $.ajax({
                    url: '/api/Employees',
                    type: 'POST',
                    async: false,
                    dataType: 'json',
                    data: data,
                    success: function (data) {

                        Command: toastr["success"](data, "Success")

                        toastr.options = {
                            "closeButton": false,
                            "debug": false,
                            "newestOnTop": false,
                            "progressBar": false,
                            "positionClass": "toast-top-right",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "3000",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        }
                        alert('Success');
                        location.reload();
                        //$('#modal_add_name_new').modal('toggle');
                    },
                    error: function () {
                        alert("Error please try again");
                        //$('#modal_add_name_new').modal('toggle');
                    }
                });
            });

        }

        function unitPriceChange(rowId, element) {
            let _unitPrice = $(element).val();
            $("#add_name_unit_price_hidden").val(_unitPrice);
            $("#add_name_row_no_hidden").val(rowId);
            let _unitPrideFirstProject = $("#unit_price_first_project_hid").val();
            let _unitPrideFirstProjectWithComma = $("#add_name_unit_price_1").val();

            var _rowId = $("#add_name_row_no_hidden").val();
            var _companyName = $('#company_row_' + _rowId).find(":selected").text();
            console.log("_companyName: " + _companyName);
            //var _unitPrice = $("#add_name_unit_price_hidden").val();

            console.log("_unitPrice: " + _unitPrice);


            //if (!unitPrices.includes(_unitPrice)) {
            if (_unitPrideFirstProject != _unitPrice && _unitPrideFirstProjectWithComma != _unitPrice) {
                $('#identity_row_' + rowId).css('color', 'red');
                $('#sub_code_row_' + rowId).css('color', 'red');
            } else {
                $('#identity_row_' + rowId).css('color', '');
                $('#sub_code_row_' + rowId).css('color', '');
            }
            //else {
            //    $('#identity_row_' + rowId).css('color', 'red');
            //    $('#sub_code_row_' + rowId).css('color', 'red');
            //}

            $.ajax({
                url: `/api/utilities/CompareGrade/${_unitPrice}`,
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    $('#grade_edit_hidden').val(data.Id);
                    console.log("_companyName.toLowerCase(): " + _companyName.toLowerCase());
                    console.log("_companyName.toLowerCase(): " + typeof (_companyName));
                    console.log("_rowId: " + _rowId);
                    //if (_companyName.toLowerCase == 'mw') {                    
                    if (_companyName.toLowerCase().indexOf("mw") > 0) {
                        console.log("test- equal");
                        $('#grade_row_' + rowId).attr('data-id', data.Id);
                        $('#grade_row_new_' + rowId).val(data.Id);
                        $('#grade_row_' + _rowId).val(data.SalaryGrade);
                    } else {
                        $('#grade_row_' + rowId).attr('data-id', data.Id);
                        $('#grade_row_new_' + rowId).val(data.Id);
                        $('#grade_row_' + _rowId).val('');
                    }


                    //$('#grade_row_' + rowId).val(data.SalaryGrade);
                },
                error: function () {
                    $('#grade_row_' + rowId).attr('data-id', '');
                    $('#grade_row_' + rowId).val('');
                    $('#grade_row_new_' + rowId).val('');
                    alert("Invalid Grade Id!!!");
                }
            });
        }

        function changeVal(rowId, element) {

            var sectionId = $(element).val();

            $.ajax({
                url: `/api/utilities/DepartmentsBySection/${sectionId}`,
                type: 'GET',
                async: false,
                dataType: 'json',
                success: function (data) {
                    $('#department_row_' + rowId).empty();
                    $('#department_row_' + rowId).append(`<option value=''>Select Department</option>`);
                    $.each(data, function (key, item) {
                        $('#department_row_' + rowId).append(`<option value='${item.Id}'>${item.DepartmentName}</option>`);
                    });
                },
                error: function () {

                }
            });


        }

        function LoadGradeValue(sel) {
            var _rowId = $("#add_name_row_no_hidden").val();
            var _companyName = $('#company_row_' + _rowId).find(":selected").text();
            console.log("_companyName: " + _companyName);
            var _unitPrice = $("#add_name_unit_price_hidden").val();

            console.log("_unitPrice: " + _unitPrice);

            $.ajax({
                url: `/api/utilities/CompareGrade/${_unitPrice}`,
                type: 'GET',
                dataType: 'json',
                //data: {
                //    unitPrice: _unitPrice
                //},
                success: function (data) {
                    $('#grade_edit_hidden').val(data.Id);
                    console.log("_companyName.toLowerCase(): " + _companyName.toLowerCase());
                    console.log("_companyName.toLowerCase(): " + typeof (_companyName));
                    console.log("_rowId: " + _rowId);
                    //if (_companyName.toLowerCase == 'mw') {
                    if (_companyName.toLowerCase().indexOf("mw") > 0) {
                        console.log("test- equal");
                        //$('#grade_new_hidden').val(data.Id);
                        $('#grade_row_' + _rowId).attr('data-id', data.Id);
                        $('#grade_row_' + _rowId).val(data.SalaryGrade);
                        $('#grade_row_new_' + _rowId).val(data.Id);
                    } else {
                        console.log("test- not equal");
                        $('#grade_row_' + _rowId).attr('data-id', '');
                        $('#grade_row_' + _rowId).val('');
                        $('#grade_row_new_' + _rowId).val('');
                    }
                },
                error: function () {
                    $('#grade_row_' + _rowId).attr('data-id', '');
                    $('#grade_row_' + _rowId).val('');
                    $('#grade_row_new_' + _rowId).val('');
                }
            });
        }

        function loadAssignmentRowData(id) {
            $('#namelist_inactive_rowid').val(id);
        }

        var expanded = false;
        $(document).on("click", function (event) {
            var $trigger = $(".multiselect");
            //alert("trigger: "+$trigger);
            if ($trigger !== event.target && !$trigger.has(event.target).length) {
                expanded = false;
                $(".commonselect").slideUp("fast");
            }
        });


        $(document).ready(function() {
            $('#name_list_name').click(function () {
                NameListSort("name_asc","name_desc");
            });
            $('#name_list_section').click(function () {
                NameListSort("section_asc", "section_desc");
            });
            $('#name_list_department').click(function () {
                NameListSort("department_asc", "department_desc");
            });
            $('#name_list_incharge').click(function () {
                NameListSort("incharge_asc", "incharge_desc");
            });
            $('#name_list_role').click(function () {
                NameListSort("role_asc", "role_desc");
            });
            $('#name_list_explanation').click(function () {
                NameListSort("explanation_asc", "explanation_desc");
            });
            $('#name_list_company').click(function () {
                NameListSort("company_asc", "company_desc");
            });
            $('#name_list_grade').click(function () {
                NameListSort("grade_asc", "grade_desc");
            });
            $('#name_list_unit').click(function () {
                NameListSort("unit_asc", "unit_desc");
            });

            // $('.container').blur(function(e) {
            //     $('.commonselect').fadeOut(100);
            // });
            // var expanded = false;
            // $(document).on("click", function (event) {
            //     var $trigger = $(".multiselect");
            //     //alert("trigger: "+$trigger);
            //     if ($trigger !== event.target && !$trigger.has(event.target).length) {
            //         expanded = false;
            //         $(".commonselect").slideUp("fast");
            //     }
            // });

            // function SectionCheck() {
            //     var checkboxes = document.getElementById("sectionChks");
            //     if (!expanded) {
            //         checkboxes.style.display = "block";
            //         //$(this).find("#sectionChks").slideToggle("fast");
            //         expanded = true;
            //     } else {
            //         checkboxes.style.display = "none";
            //         expanded = false;
            //     }
            // }
            //$('#namelist_tbl').DataTable();
            LoadNameListTableOnLoad();

            function LoadNameListTableOnLoad() {
                let employeeName = "";
                let sectionId = "";
                let departmentId = "";
                let inchargeId = "";
                let roleId = "";
                let explanationId = "";
                let companyId = "";
                let status = "";

                var url = '@Url.Action("SearchEmployee", "/api/utilities")'; // don't hard code your urls!
                $.getJSON(`/api/utilities/SearchEmployee`, {
                        employeeName: employeeName,
                        sectionId: sectionId,
                        departmentId: departmentId,
                        inchargeId: inchargeId,
                        roleId: roleId,
                        explanationId: explanationId,
                        companyId: companyId,
                        status: status
                    })
                    .done(function(data) {
                        $('#employee_list_search_results').empty();

                        //Name list with datatable
                        NameList_DatatableLoad(data);

                        let dataCount = data.length;
                        if (dataCount > 0) {
                            let counter = 1;
                            let nameWithCodeAndRemarks = "";

                            //$.each(data, function(key, item) {
                            //    //console.log("Remarks: " + item.Remarks);
                            //    //console.log("SubCode: " + item.SubCode);

                            //    if (nameWithCodeAndRemarks == "") {
                            //        nameWithCodeAndRemarks = item.EmployeeName;
                            //    }
                            //    if (item.SubCode > 0) {
                            //        nameWithCodeAndRemarks = item.EmployeeName + " " + item.SubCode
                            //    }
                            //    if (item.Remarks != "") {
                            //        nameWithCodeAndRemarks = nameWithCodeAndRemarks + " (" + item.Remarks + ")";
                            //    }


                            //    if (item.IsActive == true) {
                            //        if (item.CompanyName.toLowerCase() == "mw") {
                            //            $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name" >${nameWithCodeAndRemarks}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                            //        } else {
                            //            $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name" >${nameWithCodeAndRemarks}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                            //        }
                            //    } else {
                            //        if (item.CompanyName.toLowerCase() == "mw") {
                            //            $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name" >${nameWithCodeAndRemarks}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                            //        } else {
                            //            $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name" >${nameWithCodeAndRemarks}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                            //        }
                            //    }
                            //    // $('#name-list').DataTable({
                            //    //     //destroy: true,
                            //    //     data: data,
                            //    //     //ordering: true,
                            //    //     //order: [[3, 'desc']],
                            //    //     columns: [

                            //    //         {
                            //    //             data: 'EmployeeName',
                            //    //             //orderable: true
                            //    //         },
                            //    //         {
                            //    //             data:'SectionName'
                            //    //         },
                            //    //         {
                            //    //             data:'DepartmentName'
                            //    //         },
                            //    //         {
                            //    //             data: 'InchargeName'
                            //    //         },
                            //    //         {
                            //    //             data: 'RoleName'
                            //    //         },
                            //    //         {
                            //    //             data: 'ExplanationName'
                            //    //         },
                            //    //         {
                            //    //             data: 'CompanyName',
                            //    //             render: function (companyName) {
                            //    //                 tempCompanyName = companyName;
                            //    //                 return companyName;
                            //    //             }
                            //    //         },
                            //    //         {
                            //    //             data: 'GradePoint'
                            //    //         },
                            //    //         {
                            //    //             data: 'UnitPrice'
                            //    //         },
                            //    //         {
                            //    //             data: 'Id',
                            //    //             render: function (Id) {
                            //    //                 if (tempCompanyName.toLowerCase() == 'mw') {
                            //    //                     return `<td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${Id})" assignment_id='${Id}'>Inactive</a></td>`;
                            //    //                 } else {
                            //    //                     return `<td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${Id})" assignment_id='${Id}'>Inactive</a></td>`;
                            //    //                 }
                            //    //             }
                            //    //         }
                            //    //     ]
                            //    // });
                            //    nameWithCodeAndRemarks = "";
                            //    counter++;
                            //});
                        } else {
                            $('#employee_list_search_results').append("<tr><td colspan='8' style='text-align:center;font-size:20px;'>No Data found!</td></tr>");

                        }

                    });
                GetListDropdownValue();
            }
            // multiple search by name
            $(document).on('change', '#name_search', function() {
                let isSectionAllChk = $("#chk_sec_all").is(':checked');
                var isDepartmentAllCheck = $("#chk_dept_all").is(':checked');
                var isInChargeAllCheck = $("#chk_incharge_all").is(':checked');
                var isRoleAllCheck = $("#chk_role_all").is(':checked');
                var isExplanationAllCheck = $("#chk_explanation_all").is(':checked');
                var isCompanytAllCheck = $("#chk_comopany_all").is(':checked');

                var employeeName = "";
                var sectionCheck = [];
                var departmentCheck = [];
                var inchargeCheck = [];
                var roleCheck = [];
                var explanationCheck = [];
                var companyCheck = [];



                employeeName = $(this).val();
                var sectionCheckedBoxes = $('#sectionChks input[type="checkbox"]:checked');
                var departmentCheckedBoxes = $('#departmentChks input[type="checkbox"]:checked');
                var inchargeCheckedBoxes = $('#inchargeChks input[type="checkbox"]:checked');
                var roleCheckedBoxes = $('#RoleChks input[type="checkbox"]:checked');
                var explanationCheckedBoxes = $('#ExplanationChks input[type="checkbox"]:checked');
                var companyCheckedBoxes = $('#CompanyChks input[type="checkbox"]:checked');

                if (!isSectionAllChk) {
                    $.each(sectionCheckedBoxes, function(index, item) {
                        sectionCheck.push(item.value);
                    });
                }
                if (!isDepartmentAllCheck) {
                    $.each(departmentCheckedBoxes, function(index, item) {
                        departmentCheck.push(item.value);
                    });
                }
                if (!isInChargeAllCheck) {
                    $.each(inchargeCheckedBoxes, function(index, item) {
                        inchargeCheck.push(item.value);
                    });
                }
                if (!isRoleAllCheck) {
                    $.each(roleCheckedBoxes, function(index, item) {
                        roleCheck.push(item.value);
                    });
                }
                if (!isExplanationAllCheck) {
                    $.each(explanationCheckedBoxes, function(index, item) {
                        explanationCheck.push(item.value);
                    });
                }
                if (!isCompanytAllCheck) {
                    $.each(companyCheckedBoxes, function(index, item) {
                        companyCheck.push(item.value);
                    });
                }

                //$.each(sectionCheckedBoxes, function (index, item) {
                //    sectionCheck.push(item.value);
                //});
                //$.each(departmentCheckedBoxes, function (index, item) {
                //    departmentCheck.push(item.value);
                //});
                //$.each(inchargeCheckedBoxes, function (index, item) {
                //    inchargeCheck.push(item.value);
                //});
                //$.each(roleCheckedBoxes, function (index, item) {
                //    roleCheck.push(item.value);
                //});
                //$.each(explanationCheckedBoxes, function (index, item) {
                //    explanationCheck.push(item.value);
                //});
                //$.each(companyCheckedBoxes, function (index, item) {
                //    companyCheck.push(item.value);
                //});


                var data_info = {
                    EmployeeName: employeeName,
                    Sections: sectionCheck,
                    Departments: departmentCheck,
                    Incharges: inchargeCheck,
                    Roles: roleCheck,
                    Explanations: explanationCheck,
                    Companies: companyCheck

                };


                $.ajax({
                    url: `/api/utilities/SearchMultipleEmployee`,
                    type: 'POST',
                    dataType: 'json',
                    data: data_info,
                    success: function(data) {

                        $('#employee_list_search_results').empty();
                        //Name list with datatable
                        NameList_DatatableLoad(data);
                        NameListSort_OnChange();
                        //let dataCount = data.length;
                        ////alert(dataCount);
                        //if (dataCount > 0) {
                        //    let counter = 1;
                        //    $.each(data, function(key, item) {
                        //        if (item.IsActive == true) {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            }
                        //        } else {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            }
                        //        }

                        //        counter++;
                        //    });
                        //} else {
                        //    $('#employee_list_search_results').append("<tr><td colspan='8' style='text-align:center;font-size:20px;'>No Data found!</td></tr>");
                        //}


                    },
                    error: function() {
                        //$('#add_name_table_1 tbody').empty();
                    }
                });


            });

            // multiple search by section
            $(document).on('click', '#sectionChks input[type="checkbox"]', function() {
                let isSectionAllChk = $("#chk_sec_all").is(':checked');
                var isDepartmentAllCheck = $("#chk_dept_all").is(':checked');
                var isInChargeAllCheck = $("#chk_incharge_all").is(':checked');
                var isRoleAllCheck = $("#chk_role_all").is(':checked');
                var isExplanationAllCheck = $("#chk_explanation_all").is(':checked');
                var isCompanytAllCheck = $("#chk_comopany_all").is(':checked');

                var clicked_checkbox = $(this).attr("id")

                if (clicked_checkbox.toLowerCase() == "chk_sec_all") {
                    $(".section_checkbox").prop("checked", isSectionAllChk);
                } else {
                    $("#chk_sec_all").prop("checked", false);
                }
                clicked_checkbox = "";

                var employeeName = "";
                var sectionCheck = [];
                var departmentCheck = [];
                var inchargeCheck = [];
                var roleCheck = [];
                var explanationCheck = [];
                var companyCheck = [];

                employeeName = $('#name_search').val();
                var sectionCheckedBoxes = $('#sectionChks input[type="checkbox"]:checked');
                var departmentCheckedBoxes = $('#departmentChks input[type="checkbox"]:checked');
                var inchargeCheckedBoxes = $('#inchargeChks input[type="checkbox"]:checked');
                var roleCheckedBoxes = $('#RoleChks input[type="checkbox"]:checked');
                var explanationCheckedBoxes = $('#ExplanationChks input[type="checkbox"]:checked');
                var companyCheckedBoxes = $('#CompanyChks input[type="checkbox"]:checked');

                if (!isSectionAllChk) {
                    $.each(sectionCheckedBoxes, function(index, item) {
                        sectionCheck.push(item.value);
                    });
                }
                if (!isDepartmentAllCheck) {
                    $.each(departmentCheckedBoxes, function(index, item) {
                        departmentCheck.push(item.value);
                    });
                }
                if (!isInChargeAllCheck) {
                    $.each(inchargeCheckedBoxes, function(index, item) {
                        inchargeCheck.push(item.value);
                    });
                }
                if (!isRoleAllCheck) {
                    $.each(roleCheckedBoxes, function(index, item) {
                        roleCheck.push(item.value);
                    });
                }
                if (!isExplanationAllCheck) {
                    $.each(explanationCheckedBoxes, function(index, item) {
                        explanationCheck.push(item.value);
                    });
                }
                if (!isCompanytAllCheck) {
                    $.each(companyCheckedBoxes, function(index, item) {
                        companyCheck.push(item.value);
                    });
                }

                var data_info = {
                    EmployeeName: employeeName,
                    Sections: sectionCheck,
                    Departments: departmentCheck,
                    Incharges: inchargeCheck,
                    Roles: roleCheck,
                    Explanations: explanationCheck,
                    Companies: companyCheck

                };


                $.ajax({
                    url: `/api/utilities/SearchMultipleEmployee`,
                    type: 'POST',
                    dataType: 'json',
                    data: data_info,
                    success: function(data) {
                        var tempCompanyName = '';
                        $('#employee_list_search_results').empty();

                        //Name list with datatable
                        NameList_DatatableLoad(data);
                        NameListSort_OnChange();

                        //let dataCount = data.length;
                        ////alert(dataCount);
                        //if (dataCount > 0) {
                        //    let counter = 1;
                        //    $.each(data, function(key, item) {
                        //        if (item.IsActive == true) {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            }
                        //        } else {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            }
                        //        }

                        //        counter++;
                        //    });
                        //} else {
                        //    $('#employee_list_search_results').append("<tr><td colspan='8' style='text-align:center;font-size:20px;'>No Data found!</td></tr>");
                        //}


                    },
                    error: function() {
                        //$('#add_name_table_1 tbody').empty();
                    }
                });


            });

            // multiple search by departments
            $(document).on('click', '#departmentChks input[type="checkbox"]', function() {
                let isSectionAllChk = $("#chk_sec_all").is(':checked');
                var isDepartmentAllCheck = $("#chk_dept_all").is(':checked');
                var isInChargeAllCheck = $("#chk_incharge_all").is(':checked');
                var isRoleAllCheck = $("#chk_role_all").is(':checked');
                var isExplanationAllCheck = $("#chk_explanation_all").is(':checked');
                var isCompanytAllCheck = $("#chk_comopany_all").is(':checked');

                var clicked_checkbox = $(this).attr("id")

                if (clicked_checkbox.toLowerCase() == "chk_dept_all") {
                    $(".department_checkbox").prop("checked", isDepartmentAllCheck);
                } else {
                    $("#chk_dept_all").prop("checked", false);
                }

                var employeeName = "";
                var sectionCheck = [];
                var departmentCheck = [];
                var inchargeCheck = [];
                var roleCheck = [];
                var explanationCheck = [];
                var companyCheck = [];



                employeeName = $('#name_search').val();
                var sectionCheckedBoxes = $('#sectionChks input[type="checkbox"]:checked');
                var departmentCheckedBoxes = $('#departmentChks input[type="checkbox"]:checked');
                var inchargeCheckedBoxes = $('#inchargeChks input[type="checkbox"]:checked');
                var roleCheckedBoxes = $('#RoleChks input[type="checkbox"]:checked');
                var explanationCheckedBoxes = $('#ExplanationChks input[type="checkbox"]:checked');
                var companyCheckedBoxes = $('#CompanyChks input[type="checkbox"]:checked');

                if (!isSectionAllChk) {
                    $.each(sectionCheckedBoxes, function(index, item) {
                        sectionCheck.push(item.value);
                    });
                }
                if (!isDepartmentAllCheck) {
                    $.each(departmentCheckedBoxes, function(index, item) {
                        departmentCheck.push(item.value);
                    });
                }
                if (!isInChargeAllCheck) {
                    $.each(inchargeCheckedBoxes, function(index, item) {
                        inchargeCheck.push(item.value);
                    });
                }
                if (!isRoleAllCheck) {
                    $.each(roleCheckedBoxes, function(index, item) {
                        roleCheck.push(item.value);
                    });
                }
                if (!isExplanationAllCheck) {
                    $.each(explanationCheckedBoxes, function(index, item) {
                        explanationCheck.push(item.value);
                    });
                }
                if (!isCompanytAllCheck) {
                    $.each(companyCheckedBoxes, function(index, item) {
                        companyCheck.push(item.value);
                    });
                }

                //$.each(sectionCheckedBoxes, function (index, item) {
                //    sectionCheck.push(item.value);
                //});
                //$.each(departmentCheckedBoxes, function (index, item) {
                //    departmentCheck.push(item.value);
                //});
                //$.each(inchargeCheckedBoxes, function (index, item) {
                //    inchargeCheck.push(item.value);
                //});
                //$.each(roleCheckedBoxes, function (index, item) {
                //    roleCheck.push(item.value);
                //});
                //$.each(explanationCheckedBoxes, function (index, item) {
                //    explanationCheck.push(item.value);
                //});
                //$.each(companyCheckedBoxes, function (index, item) {
                //    companyCheck.push(item.value);
                //});


                var data_info = {
                    EmployeeName: employeeName,
                    Sections: sectionCheck,
                    Departments: departmentCheck,
                    Incharges: inchargeCheck,
                    Roles: roleCheck,
                    Explanations: explanationCheck,
                    Companies: companyCheck

                };


                $.ajax({
                    url: `/api/utilities/SearchMultipleEmployee`,
                    type: 'POST',
                    dataType: 'json',
                    data: data_info,
                    success: function(data) {

                        $('#employee_list_search_results').empty();

                        //Name list with datatable
                        NameList_DatatableLoad(data);
                        NameListSort_OnChange();
                        //let dataCount = data.length;
                        ////alert(dataCount);
                        //if (dataCount > 0) {
                        //    let counter = 1;
                        //    $.each(data, function(key, item) {
                        //        if (item.IsActive == true) {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            }
                        //        } else {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            }
                        //        }

                        //        counter++;
                        //    });
                        //} else {
                        //    $('#employee_list_search_results').append("<tr><td colspan='8' style='text-align:center;font-size:20px;'>No Data found!</td></tr>");
                        //}


                    },
                    error: function() {
                        //$('#add_name_table_1 tbody').empty();
                    }
                });

            });

            // multiple search by incharges
            $(document).on('click', '#inchargeChks input[type="checkbox"]', function() {
                let isSectionAllChk = $("#chk_sec_all").is(':checked');
                var isDepartmentAllCheck = $("#chk_dept_all").is(':checked');
                var isInChargeAllCheck = $("#chk_incharge_all").is(':checked');
                var isRoleAllCheck = $("#chk_role_all").is(':checked');
                var isExplanationAllCheck = $("#chk_explanation_all").is(':checked');
                var isCompanytAllCheck = $("#chk_comopany_all").is(':checked');

                var clicked_checkbox = $(this).attr("id")

                if (clicked_checkbox.toLowerCase() == "chk_incharge_all") {
                    $(".incharge_checkbox").prop("checked", isInChargeAllCheck);
                } else {
                    $("#chk_incharge_all").prop("checked", false);
                }

                var employeeName = "";
                var sectionCheck = [];
                var departmentCheck = [];
                var inchargeCheck = [];
                var roleCheck = [];
                var explanationCheck = [];
                var companyCheck = [];



                employeeName = $('#name_search').val();
                var sectionCheckedBoxes = $('#sectionChks input[type="checkbox"]:checked');
                var departmentCheckedBoxes = $('#departmentChks input[type="checkbox"]:checked');
                var inchargeCheckedBoxes = $('#inchargeChks input[type="checkbox"]:checked');
                var roleCheckedBoxes = $('#RoleChks input[type="checkbox"]:checked');
                var explanationCheckedBoxes = $('#ExplanationChks input[type="checkbox"]:checked');
                var companyCheckedBoxes = $('#CompanyChks input[type="checkbox"]:checked');

                if (!isSectionAllChk) {
                    $.each(sectionCheckedBoxes, function(index, item) {
                        sectionCheck.push(item.value);
                    });
                }
                if (!isDepartmentAllCheck) {
                    $.each(departmentCheckedBoxes, function(index, item) {
                        departmentCheck.push(item.value);
                    });
                }
                if (!isInChargeAllCheck) {
                    $.each(inchargeCheckedBoxes, function(index, item) {
                        inchargeCheck.push(item.value);
                    });
                }
                if (!isRoleAllCheck) {
                    $.each(roleCheckedBoxes, function(index, item) {
                        roleCheck.push(item.value);
                    });
                }
                if (!isExplanationAllCheck) {
                    $.each(explanationCheckedBoxes, function(index, item) {
                        explanationCheck.push(item.value);
                    });
                }
                if (!isCompanytAllCheck) {
                    $.each(companyCheckedBoxes, function(index, item) {
                        companyCheck.push(item.value);
                    });
                }

                //$.each(sectionCheckedBoxes, function (index, item) {
                //    sectionCheck.push(item.value);
                //});
                //$.each(departmentCheckedBoxes, function (index, item) {
                //    departmentCheck.push(item.value);
                //});
                //$.each(inchargeCheckedBoxes, function (index, item) {
                //    inchargeCheck.push(item.value);
                //});
                //$.each(roleCheckedBoxes, function (index, item) {
                //    roleCheck.push(item.value);
                //});
                //$.each(explanationCheckedBoxes, function (index, item) {
                //    explanationCheck.push(item.value);
                //});
                //$.each(companyCheckedBoxes, function (index, item) {
                //    companyCheck.push(item.value);
                //});


                var data_info = {
                    EmployeeName: employeeName,
                    Sections: sectionCheck,
                    Departments: departmentCheck,
                    Incharges: inchargeCheck,
                    Roles: roleCheck,
                    Explanations: explanationCheck,
                    Companies: companyCheck

                };


                $.ajax({
                    url: `/api/utilities/SearchMultipleEmployee`,
                    type: 'POST',
                    dataType: 'json',
                    data: data_info,
                    success: function(data) {

                        $('#employee_list_search_results').empty();

                        //Name list with datatable
                        NameList_DatatableLoad(data);
                        NameListSort_OnChange();

                        //let dataCount = data.length;
                        ////alert(dataCount);
                        //if (dataCount > 0) {
                        //    let counter = 1;
                        //    $.each(data, function(key, item) {
                        //        if (item.IsActive == true) {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            }
                        //        } else {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            }
                        //        }

                        //        counter++;
                        //    });
                        //} else {
                        //    $('#employee_list_search_results').append("<tr><td colspan='8' style='text-align:center;font-size:20px;'>No Data found!</td></tr>");
                        //}


                    },
                    error: function() {
                        //$('#add_name_table_1 tbody').empty();
                    }
                });

            });

            // multiple search by roles
            $(document).on('click', '#RoleChks input[type="checkbox"]', function() {
                let isSectionAllChk = $("#chk_sec_all").is(':checked');
                var isDepartmentAllCheck = $("#chk_dept_all").is(':checked');
                var isInChargeAllCheck = $("#chk_incharge_all").is(':checked');
                var isRoleAllCheck = $("#chk_role_all").is(':checked');
                var isExplanationAllCheck = $("#chk_explanation_all").is(':checked');
                var isCompanytAllCheck = $("#chk_comopany_all").is(':checked');

                var clicked_checkbox = $(this).attr("id")

                if (clicked_checkbox.toLowerCase() == "chk_role_all") {
                    $(".role_checkbox").prop("checked", isRoleAllCheck);
                } else {
                    $("#chk_role_all").prop("checked", false);
                }


                var employeeName = "";
                var sectionCheck = [];
                var departmentCheck = [];
                var inchargeCheck = [];
                var roleCheck = [];
                var explanationCheck = [];
                var companyCheck = [];



                employeeName = $('#name_search').val();
                var sectionCheckedBoxes = $('#sectionChks input[type="checkbox"]:checked');
                var departmentCheckedBoxes = $('#departmentChks input[type="checkbox"]:checked');
                var inchargeCheckedBoxes = $('#inchargeChks input[type="checkbox"]:checked');
                var roleCheckedBoxes = $('#RoleChks input[type="checkbox"]:checked');
                var explanationCheckedBoxes = $('#ExplanationChks input[type="checkbox"]:checked');
                var companyCheckedBoxes = $('#CompanyChks input[type="checkbox"]:checked');

                if (!isSectionAllChk) {
                    $.each(sectionCheckedBoxes, function(index, item) {
                        sectionCheck.push(item.value);
                    });
                }
                if (!isDepartmentAllCheck) {
                    $.each(departmentCheckedBoxes, function(index, item) {
                        departmentCheck.push(item.value);
                    });
                }
                if (!isInChargeAllCheck) {
                    $.each(inchargeCheckedBoxes, function(index, item) {
                        inchargeCheck.push(item.value);
                    });
                }
                if (!isRoleAllCheck) {
                    $.each(roleCheckedBoxes, function(index, item) {
                        roleCheck.push(item.value);
                    });
                }
                if (!isExplanationAllCheck) {
                    $.each(explanationCheckedBoxes, function(index, item) {
                        explanationCheck.push(item.value);
                    });
                }
                if (!isCompanytAllCheck) {
                    $.each(companyCheckedBoxes, function(index, item) {
                        companyCheck.push(item.value);
                    });
                }

                //$.each(sectionCheckedBoxes, function (index, item) {
                //    sectionCheck.push(item.value);
                //});
                //$.each(departmentCheckedBoxes, function (index, item) {
                //    departmentCheck.push(item.value);
                //});
                //$.each(inchargeCheckedBoxes, function (index, item) {
                //    inchargeCheck.push(item.value);
                //});
                //$.each(roleCheckedBoxes, function (index, item) {
                //    roleCheck.push(item.value);
                //});
                //$.each(explanationCheckedBoxes, function (index, item) {
                //    explanationCheck.push(item.value);
                //});
                //$.each(companyCheckedBoxes, function (index, item) {
                //    companyCheck.push(item.value);
                //});


                var data_info = {
                    EmployeeName: employeeName,
                    Sections: sectionCheck,
                    Departments: departmentCheck,
                    Incharges: inchargeCheck,
                    Roles: roleCheck,
                    Explanations: explanationCheck,
                    Companies: companyCheck

                };


                $.ajax({
                    url: `/api/utilities/SearchMultipleEmployee`,
                    type: 'POST',
                    dataType: 'json',
                    data: data_info,
                    success: function(data) {

                        $('#employee_list_search_results').empty();

                        //Name list with datatable
                        NameList_DatatableLoad(data);
                        NameListSort_OnChange();

                        //let dataCount = data.length;
                        ////alert(dataCount);
                        //if (dataCount > 0) {
                        //    let counter = 1;
                        //    $.each(data, function(key, item) {
                        //        if (item.IsActive == true) {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            }
                        //        } else {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            }
                        //        }

                        //        counter++;
                        //    });
                        //} else {
                        //    $('#employee_list_search_results').append("<tr><td colspan='8' style='text-align:center;font-size:20px;'>No Data found!</td></tr>");
                        //}


                    },
                    error: function() {
                        //$('#add_name_table_1 tbody').empty();
                    }
                });

            });


            // multiple search by explanations
            $(document).on('click', '#ExplanationChks input[type="checkbox"]', function() {
                let isSectionAllChk = $("#chk_sec_all").is(':checked');
                var isDepartmentAllCheck = $("#chk_dept_all").is(':checked');
                var isInChargeAllCheck = $("#chk_incharge_all").is(':checked');
                var isRoleAllCheck = $("#chk_role_all").is(':checked');
                var isExplanationAllCheck = $("#chk_explanation_all").is(':checked');
                var isCompanytAllCheck = $("#chk_comopany_all").is(':checked');

                var clicked_checkbox = $(this).attr("id")

                if (clicked_checkbox.toLowerCase() == "chk_explanation_all") {
                    $(".explanation_checkbox").prop("checked", isExplanationAllCheck);
                } else {
                    $("#chk_explanation_all").prop("checked", false);
                }

                var employeeName = "";
                var sectionCheck = [];
                var departmentCheck = [];
                var inchargeCheck = [];
                var roleCheck = [];
                var explanationCheck = [];
                var companyCheck = [];



                employeeName = $('#name_search').val();
                var sectionCheckedBoxes = $('#sectionChks input[type="checkbox"]:checked');
                var departmentCheckedBoxes = $('#departmentChks input[type="checkbox"]:checked');
                var inchargeCheckedBoxes = $('#inchargeChks input[type="checkbox"]:checked');
                var roleCheckedBoxes = $('#RoleChks input[type="checkbox"]:checked');
                var explanationCheckedBoxes = $('#ExplanationChks input[type="checkbox"]:checked');
                var companyCheckedBoxes = $('#CompanyChks input[type="checkbox"]:checked');

                if (!isSectionAllChk) {
                    $.each(sectionCheckedBoxes, function(index, item) {
                        sectionCheck.push(item.value);
                    });
                }
                if (!isDepartmentAllCheck) {
                    $.each(departmentCheckedBoxes, function(index, item) {
                        departmentCheck.push(item.value);
                    });
                }
                if (!isInChargeAllCheck) {
                    $.each(inchargeCheckedBoxes, function(index, item) {
                        inchargeCheck.push(item.value);
                    });
                }
                if (!isRoleAllCheck) {
                    $.each(roleCheckedBoxes, function(index, item) {
                        roleCheck.push(item.value);
                    });
                }
                if (!isExplanationAllCheck) {
                    $.each(explanationCheckedBoxes, function(index, item) {
                        explanationCheck.push(item.value);
                    });
                }
                if (!isCompanytAllCheck) {
                    $.each(companyCheckedBoxes, function(index, item) {
                        companyCheck.push(item.value);
                    });
                }


                //$.each(sectionCheckedBoxes, function (index, item) {
                //    sectionCheck.push(item.value);
                //});
                //$.each(departmentCheckedBoxes, function (index, item) {
                //    departmentCheck.push(item.value);
                //});
                //$.each(inchargeCheckedBoxes, function (index, item) {
                //    inchargeCheck.push(item.value);
                //});
                //$.each(roleCheckedBoxes, function (index, item) {
                //    roleCheck.push(item.value);
                //});
                //$.each(explanationCheckedBoxes, function (index, item) {
                //    explanationCheck.push(item.value);
                //});
                //$.each(companyCheckedBoxes, function (index, item) {
                //    companyCheck.push(item.value);
                //});


                var data_info = {
                    EmployeeName: employeeName,
                    Sections: sectionCheck,
                    Departments: departmentCheck,
                    Incharges: inchargeCheck,
                    Roles: roleCheck,
                    Explanations: explanationCheck,
                    Companies: companyCheck

                };


                $.ajax({
                    url: `/api/utilities/SearchMultipleEmployee`,
                    type: 'POST',
                    dataType: 'json',
                    data: data_info,
                    success: function(data) {

                        $('#employee_list_search_results').empty();

                        //Name list with datatable
                        NameList_DatatableLoad(data);
                        NameListSort_OnChange();

                        //let dataCount = data.length;
                        ////alert(dataCount);
                        //if (dataCount > 0) {
                        //    let counter = 1;
                        //    $.each(data, function(key, item) {
                        //        if (item.IsActive == true) {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            }
                        //        } else {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            }
                        //        }

                        //        counter++;
                        //    });
                        //} else {
                        //    $('#employee_list_search_results').append("<tr><td colspan='8' style='text-align:center;font-size:20px;'>No Data found!</td></tr>");
                        //}


                    },
                    error: function() {
                        //$('#add_name_table_1 tbody').empty();
                    }
                });

            });

            // multiple search by companies
            $(document).on('click', '#CompanyChks input[type="checkbox"]', function() {
                let isSectionAllChk = $("#chk_sec_all").is(':checked');
                var isDepartmentAllCheck = $("#chk_dept_all").is(':checked');
                var isInChargeAllCheck = $("#chk_incharge_all").is(':checked');
                var isRoleAllCheck = $("#chk_role_all").is(':checked');
                var isExplanationAllCheck = $("#chk_explanation_all").is(':checked');
                var isCompanytAllCheck = $("#chk_comopany_all").is(':checked');

                var clicked_checkbox = $(this).attr("id")

                if (clicked_checkbox.toLowerCase() == "chk_comopany_all") {
                    $(".comopany_checkbox").prop("checked", isCompanytAllCheck);
                } else {
                    $("#chk_comopany_all").prop("checked", false);
                }

                var employeeName = "";
                var sectionCheck = [];
                var departmentCheck = [];
                var inchargeCheck = [];
                var roleCheck = [];
                var explanationCheck = [];
                var companyCheck = [];



                employeeName = $('#name_search').val();
                var sectionCheckedBoxes = $('#sectionChks input[type="checkbox"]:checked');
                var departmentCheckedBoxes = $('#departmentChks input[type="checkbox"]:checked');
                var inchargeCheckedBoxes = $('#inchargeChks input[type="checkbox"]:checked');
                var roleCheckedBoxes = $('#RoleChks input[type="checkbox"]:checked');
                var explanationCheckedBoxes = $('#ExplanationChks input[type="checkbox"]:checked');
                var companyCheckedBoxes = $('#CompanyChks input[type="checkbox"]:checked');

                if (!isSectionAllChk) {
                    $.each(sectionCheckedBoxes, function(index, item) {
                        sectionCheck.push(item.value);
                    });
                }
                if (!isDepartmentAllCheck) {
                    $.each(departmentCheckedBoxes, function(index, item) {
                        departmentCheck.push(item.value);
                    });
                }
                if (!isInChargeAllCheck) {
                    $.each(inchargeCheckedBoxes, function(index, item) {
                        inchargeCheck.push(item.value);
                    });
                }
                if (!isRoleAllCheck) {
                    $.each(roleCheckedBoxes, function(index, item) {
                        roleCheck.push(item.value);
                    });
                }
                if (!isExplanationAllCheck) {
                    $.each(explanationCheckedBoxes, function(index, item) {
                        explanationCheck.push(item.value);
                    });
                }
                if (!isCompanytAllCheck) {
                    $.each(companyCheckedBoxes, function(index, item) {
                        companyCheck.push(item.value);
                    });
                }


                //$.each(sectionCheckedBoxes, function (index, item) {
                //    sectionCheck.push(item.value);
                //});
                //$.each(departmentCheckedBoxes, function (index, item) {
                //    departmentCheck.push(item.value);
                //});
                //$.each(inchargeCheckedBoxes, function (index, item) {
                //    inchargeCheck.push(item.value);
                //});
                //$.each(roleCheckedBoxes, function (index, item) {
                //    roleCheck.push(item.value);
                //});
                //$.each(explanationCheckedBoxes, function (index, item) {
                //    explanationCheck.push(item.value);
                //});
                //$.each(companyCheckedBoxes, function (index, item) {
                //    companyCheck.push(item.value);
                //});


                var data_info = {
                    EmployeeName: employeeName,
                    Sections: sectionCheck,
                    Departments: departmentCheck,
                    Incharges: inchargeCheck,
                    Roles: roleCheck,
                    Explanations: explanationCheck,
                    Companies: companyCheck

                };


                $.ajax({
                    url: `/api/utilities/SearchMultipleEmployee`,
                    type: 'POST',
                    dataType: 'json',
                    data: data_info,
                    success: function(data) {

                        $('#employee_list_search_results').empty();

                        //Name list with datatable
                        NameList_DatatableLoad(data);
                        NameListSort_OnChange();

                        //let dataCount = data.length;
                        ////alert(dataCount);
                        //if (dataCount > 0) {
                        //    let counter = 1;
                        //    $.each(data, function(key, item) {
                        //        if (item.IsActive == true) {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'><a href="javascript:void(0);" id='edit_button' onClick="loadSingleAssignmentData(${item.Id})" data-toggle="modal" data-target="#modal_edit_name">Edit</a><a id='delete_button' href='javascript:void();' data-toggle='modal' data-target='#namelist_delete' onClick="loadAssignmentRowData(${item.Id})" assignment_id='${item.Id}'>Inactive</a></td></tr>`);
                        //            }
                        //        } else {
                        //            if (item.CompanyName.toLowerCase() == "mw") {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint">${item.GradePoint}</td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            } else {
                        //                $('#employee_list_search_results').append(`<tr class="namelist_tr" style="line-height: 2px;"><td class="namelist_td name">${item.EmployeeName}</td><td class="namelist_td section">${item.SectionName}</td><td class="namelist_td department">${item.DepartmentName}</td><td class="namelist_td InCharge">${item.InchargeName}</td><td class="namelist_td Role">${item.RoleName}</td><td class="namelist_td Explanation">${item.ExplanationName}</td><td class="namelist_td Company">${item.CompanyName}</td><td class="namelist_td GradePoint"></td><td class="namelist_td UnitPrice">${item.UnitPrice}</td><td class='namelist_td Action'>inactivated</td></tr>`);
                        //            }
                        //        }

                        //        counter++;
                        //    });
                        //} else {
                        //    $('#employee_list_search_results').append("<tr><td colspan='8' style='text-align:center;font-size:20px;'>No Data found!</td></tr>");
                        //}


                    },
                    error: function() {
                        //$('#add_name_table_1 tbody').empty();
                    }
                });
            });


            // for add new
            $.getJSON('/api/Roles/')
                .done(function(data) {
                    $('#role_new').empty();
                    $('#role_new').append(`<option value=''>Select Role</option>`);
                    $.each(data, function(key, item) {
                        $('#role_new').append(`<option value='${item.Id}'>${item.RoleName}</option>`);
                    });
                });
            // for search
            //$.getJSON('/api/Roles/')
            //    .done(function (data) {
            //        $('#role_search').empty();
            //        $('#role_search').append(`<option value=''>Select Role</option>`);
            //        $.each(data, function (key, item) {
            //            $('#role_search').append(`<option value='${item.Id}'>${item.RoleName}</option>`);
            //        });
            //    });
            // for add new
            $.getJSON('/api/Explanations/')
                .done(function(data) {
                    $('#explanation_new').empty();
                    $('#explanation_new').append(`<option value=''>Select Explanation</option>`);
                    $.each(data, function(key, item) {
                        $('#explanation_new').append(`<option value='${item.Id}'>${item.ExplanationName}</option>`);
                    });
                });
            // for search
            //$.getJSON('/api/Explanations/')
            //    .done(function (data) {
            //        $('#explanation_search').empty();
            //        $('#explanation_search').append(`<option value=''>Select Explanation</option>`);
            //        $.each(data, function (key, item) {
            //            $('#explanation_search').append(`<option value='${item.Id}'>${item.ExplanationName}</option>`);
            //        });
            //    });
            // for add new
            $.getJSON('/api/Companies/')
                .done(function(data) {
                    $('#company_new').empty();
                    $('#company_new').append(`<option value=''>Select Company</option>`);
                    $.each(data, function(key, item) {
                        $('#company_new').append(`<option value='${item.Id}'>${item.CompanyName}</option>`);
                    });
                });
            // for search
            //$.getJSON('/api/Companies/')
            //    .done(function (data) {
            //        $('#company_search').empty();
            //        $('#company_search').append(`<option value=''>Select Company</option>`);
            //        $.each(data, function (key, item) {
            //            $('#company_search').append(`<option value='${item.Id}'>${item.CompanyName}</option>`);
            //        });
            //    });

            // for add new
            $.getJSON('/api/incharges/')
                .done(function(data) {
                    $('#incharge_new').empty();
                    $('#incharge_new').append(`<option value=''>Select In-Charge</option>`);
                    $.each(data, function(key, item) {
                        $('#incharge_new').append(`<option value='${item.Id}'>${item.InChargeName}</option>`);
                    });
                });
            // for search
            //$.getJSON('/api/incharges/')
            //    .done(function (data) {
            //        $('#incharge_search').empty();
            //        $('#incharge_search').append(`<option value=''>Select In-Charge</option>`);
            //        $.each(data, function (key, item) {
            //            $('#incharge_search').append(`<option value='${item.Id}'>${item.InChargeName}</option>`);
            //        });
            //    });
            // for add new
            $.getJSON('/api/sections/')
                .done(function(data) {
                    $('#section_new').empty();
                    $('#section_new').append(`<option value=''>Select Section</option>`);
                    $.each(data, function(key, item) {
                        $('#section_new').append(`<option value='${item.Id}'>${item.SectionName}</option>`);
                    });
                });
            // for search
            //$.getJSON('/api/sections/')
            //    .done(function (data) {
            //        $('#section_search').empty();
            //        $('#section_search').append(`<option value=''>Select Section</option>`);
            //        $.each(data, function (key, item) {
            //            $('#section_search').append(`<option value='${item.Id}'>${item.SectionName}</option>`);
            //        });
            //    });


            $(document).on('change', '#section', function() {

                var sectionId = $(this).val();
                console.log(sectionId);

                $.getJSON(`/api/utilities/DepartmentsBySection/${sectionId}`)
                    .done(function(data) {
                        $('#department').empty();
                        $('#department').append(`<option value=''>Select Department</option>`);
                        $.each(data, function(key, item) {
                            $('#department').append(`<option value='${item.Id}'>${item.DepartmentName}</option>`);
                        });
                    });
            });

            $(document).on('change', '#section_new', function() {

                var sectionId = $(this).val();
                console.log(sectionId);

                $.getJSON(`/api/utilities/DepartmentsBySection/${sectionId}`)
                    .done(function(data) {
                        $('#department_new').empty();
                        $('#department_new').append(`<option value=''>Select Department</option>`);
                        $.each(data, function(key, item) {
                            $('#department_new').append(`<option value='${item.Id}'>${item.DepartmentName}</option>`);
                        });
                    });
            });

            $('#unitprice_new').on('change', function() {
                var _unitPrice = $(this).val();

                $.ajax({
                    url: `/api/utilities/CompareGrade/${_unitPrice}`,
                    type: 'GET',
                    dataType: 'json',
                    //data: {
                    //    unitPrice: _unitPrice
                    //},
                    success: function(data) {
                        $('#grade_new_hidden').val(data.Id);
                        $('#grade_new').val(data.SalaryGrade);
                    },
                    error: function() {
                        $('#grade_new_hidden').val('');
                        $('#grade_new').val('');
                    }
                });
            });


            $('#namelist_inactive').on('click', function() {
                var rowId = $('#namelist_inactive_rowid').val();

                $.ajax({
                    url: `/api/Employees/RemoveAssignment/${rowId}`,
                    type: 'PUT',
                    dataType: 'json',
                    //data: {
                    //    unitPrice: _unitPrice
                    //},
                    success: function(data) {
                        Command: toastr["success"](data, "Success")

                            toastr.options = {
                            "closeButton": false,
                            "debug": false,
                            "newestOnTop": false,
                            "progressBar": false,
                            "positionClass": "toast-top-right",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "3000",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        }

                            alert('Success');
                        location.reload();
                    },
                    error: function() {
                        alert("Error please try again");
                    }
                });
            });


            $('#add_name_add_new').on('click', function() {

                var employeeName = $('#identity_new').val();
                var sectionId = $('#section_new').find(":selected").val();
                var inchargeId = $('#incharge_new').find(":selected").val();
                var departmentId = $('#department_new').find(":selected").val();
                var roleId = $('#role_new').find(":selected").val();
                var companyId = $('#company_new').find(":selected").val();
                var explanationId = $('#explanation_new').find(":selected").val();
                var unitPrice = $('#unitprice_new').val();
                var gradeId = $('#grade_new_hidden').val();
                var remarks = $('#memo_new').val();



                var data = {
                    EmployeeName: employeeName,
                    SectionId: sectionId,
                    DepartmentId: departmentId,
                    InchargeId: inchargeId,
                    RoleId: roleId,
                    ExplanationId: explanationId,
                    CompanyId: companyId,
                    UnitPrice: unitPrice,
                    GradeId: gradeId,
                    Remarks: remarks,
                    SubCode: 1


                };

                console.log(data);

                $.ajax({
                    url: '/api/Employees',
                    type: 'POST',
                    dataType: 'json',
                    data: data,
                    success: function(data) {

                        Command: toastr["success"](data, "Success")

                            toastr.options = {
                            "closeButton": false,
                            "debug": false,
                            "newestOnTop": false,
                            "progressBar": false,
                            "positionClass": "toast-top-right",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "3000",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        }
                        alert('Success');
                        location.reload();
                    },
                    error: function(data) {
                        alert(data.responseJSON.Message);
                        //$('#modal_add_name_new').modal('toggle');
                    }
                });



            });



            $('#add_name_edit').on('click', function () {

                var sectionId = $('#section_edit').find(":selected").val();
                var inchargeId = $('#incharge_edit').find(":selected").val();
                var departmentId = $('#department_edit').find(":selected").val();
                var roleId = $('#role_edit').find(":selected").val();
                var companyId = $('#company_edit').find(":selected").val();
                var explanationId = $('#explanation_edit').find(":selected").val();
                var unitPrice = $('#unitprice_edit').val();
                var gradeId = $('#grade_edit_hidden').val();
                var rowId = $('#row_id_hidden_edit').val();
                var remarks = $('#memo_edit').val();
                console.log("testing");
                var dataSingleAssignmentUpdate = {
                    Id: rowId,
                    SectionId: sectionId,
                    DepartmentId: departmentId,
                    InchargeId: inchargeId,
                    RoleId: roleId,
                    ExplanationId: explanationId,
                    CompanyId: companyId,
                    UnitPrice: unitPrice,
                    GradeId: gradeId,
                    Remarks: remarks,
                };

                console.log(dataSingleAssignmentUpdate);

                $.ajax({
                    url: '/api/Employees',
                    type: 'PUT',
                    async: false,
                    dataType: 'json',
                    data: dataSingleAssignmentUpdate,
                    success: function(data) {

                        Command: toastr["success"](data, "Success")

                            toastr.options = {
                            "closeButton": false,
                            "debug": false,
                            "newestOnTop": false,
                            "progressBar": false,
                            "positionClass": "toast-top-right",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "3000",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        }
                        alert('Success');
                        location.reload();
                        //$('#modal_add_name_new').modal('toggle');
                    },
                    error: function(data) {
                        alert(data.responseJSON.Message);
                        //$('#modal_add_name_new').modal('toggle');
                    }
                });



            });


            $('#unitprice_edit').on('change', function() {
                var _unitPrice = $(this).val();
                var _companyName = $("#company_edit option:selected").text();

                $.ajax({
                    url: `/api/utilities/CompareGrade/${_unitPrice}`,
                    type: 'GET',
                    dataType: 'json',
                    //data: {
                    //    unitPrice: _unitPrice
                    //},
                    success: function(data) {
                        $('#grade_edit_hidden').val(data.Id);
                        if (_companyName.toLowerCase() == "mw") {
                            $('#grade_edit').val(data.SalaryGrade);
                        } else {
                            $('#grade_edit').val('');
                        }
                    },
                    error: function() {
                        $('#grade_edit').val('');
                        $('#grade_edit_hidden').val('');
                    }
                });
            });

            $('#company_edit').on('change', function () {
                var _companyName = $("#company_edit option:selected").text();
                var _unitPrice = $("#unitprice_edit").val();
                console.log("_unitPrice: " + _unitPrice);

                $.ajax({
                    url: `/api/utilities/CompareGrade/${_unitPrice}`,
                    type: 'GET',
                    dataType: 'json',
                    //data: {
                    //    unitPrice: _unitPrice
                    //},
                    success: function (data) {
                        $('#grade_edit_hidden').val(data.Id);
                        if (_companyName.toLowerCase() == "mw") {
                            $('#grade_edit').val(data.SalaryGrade);
                        } else {
                            $('#grade_edit').val('');
                        }
                    },
                    error: function () {
                        $('#grade_edit').val('');
                        $('#grade_edit_hidden').val('');
                    }
                });
            });

            $('#company_new').on('change', function () {
                var _companyName = $("#company_new option:selected").text();
                var _unitPrice = $("#unitprice_new").val();
                console.log("_unitPrice: " + _unitPrice);

                $.ajax({
                    url: `/api/utilities/CompareGrade/${_unitPrice}`,
                    type: 'GET',
                    dataType: 'json',
                    //data: {
                    //    unitPrice: _unitPrice
                    //},
                    success: function (data) {
                        $('#grade_edit_hidden').val(data.Id);
                        if (_companyName.toLowerCase() == "mw") {
                            $('#grade_new').val(data.SalaryGrade);
                        } else {
                            $('#grade_new').val('');
                        }
                    },
                    error: function () {
                        $('#grade_new').val('');
                        $('#grade_edit_hidden').val('');
                    }
                });
            });

            $('#unitprice_new').on('change', function () {
                var _unitPrice = $(this).val();
                var _companyName = $("#company_new option:selected").text();

                console.log("_unitPrice: " + _unitPrice);

                $.ajax({
                    url: `/api/utilities/CompareGrade/${_unitPrice}`,
                    type: 'GET',
                    dataType: 'json',
                    //data: {
                    //    unitPrice: _unitPrice
                    //},
                    success: function (data) {
                        $('#grade_edit_hidden').val(data.Id);
                        if (_companyName.toLowerCase() == "mw") {
                            $('#grade_new').val(data.SalaryGrade);
                        } else {
                            $('#grade_new').val('');
                        }
                    },
                    error: function () {
                        $('#grade_new').val('');
                        $('#grade_edit_hidden').val('');
                    }
                });
            });


            $(document).on('change', '#section_edit', function() {

                var sectionId = $(this).val();
                console.log(sectionId);

                $.getJSON(`/api/utilities/DepartmentsBySection/${sectionId}`)
                    .done(function(data) {
                        $('#department_edit').empty();
                        $('#department_edit').append(`<option value=''>Select Department</option>`);
                        $.each(data, function(key, item) {
                            $('#department_edit').append(`<option value='${item.Id}'>${item.DepartmentName}</option>`);
                        });
                    });
            });

            $('#edit_button').click(function() {
                let assignmentId = $(this).attr('assignment_id');
                alert(assignmentId);
            });
            $('#delete_button').click(function() {
                let assignmentId = $(this).attr('assignment_id');
                alert(assignmentId);
            });

            function GetListDropdownValue() {
                console.log("test");

                $.getJSON('/api/sections/')
                    .done(function(data) {
                        $('#sectionChks').empty();
                        $('#sectionChks').append(`<label for='chk_sec_all'><input id="chk_sec_all" type="checkbox" checked data-checkwhat="chkSelect" value='sec_all'/>All</label>`)
                        $.each(data, function(key, item) {
                            $('#sectionChks').append(`<label for='section_checkbox_${item.Id}'><input class='section_checkbox' id="section_checkbox_${item.Id}"  type="checkbox" checked value='${item.Id}'/>${item.SectionName}</label>`)
                        });
                    });
                $.getJSON('/api/Departments/')
                    .done(function(data) {
                        $('#departmentChks').empty();
                        $('#departmentChks').append(`<label for='chk_dept_all'><input id="chk_dept_all" type="checkbox" checked value='dept_all'/>All</label>`)
                        $.each(data, function(key, item) {
                            $('#departmentChks').append(`<label for='department_checkbox_${item.Id}'><input class='department_checkbox' id="department_checkbox_${item.Id}" type="checkbox" checked value='${item.Id}'/>${item.DepartmentName}</label>`)
                        });
                    });
                $.getJSON('/api/InCharges/')
                    .done(function(data) {
                        $('#inchargeChks').empty();
                        $('#inchargeChks').append(`<label for='chk_incharge_all'><input id="chk_incharge_all" type="checkbox" checked value='incharge_all'/>All</label>`);
                        $.each(data, function(key, item) {
                            $('#inchargeChks').append(`<label for='incharge_checkbox_${item.Id}'><input class='incharge_checkbox' id="incharge_checkbox_${item.Id}" type="checkbox" checked value='${item.Id}'/>${item.InChargeName}</label>`)
                        });
                    });
                $.getJSON('/api/Roles/')
                    .done(function(data) {
                        $('#RoleChks').empty();
                        $('#RoleChks').append(`<label for='chk_role_all'><input id="chk_role_all" type="checkbox" checked value='role_all'/>All</label>`);
                        $.each(data, function(key, item) {
                            $('#RoleChks').append(`<label for='role_checkbox_${item.Id}'><input class='role_checkbox' id="role_checkbox_${item.Id}" type="checkbox" checked value='${item.Id}'/>${item.RoleName}</label>`)
                        });
                    });
                $.getJSON('/api/Explanations/')
                    .done(function(data) {
                        $('#ExplanationChks').empty();
                        $('#ExplanationChks').append(`<label for='chk_explanation_all'><input id="chk_explanation_all" type="checkbox" checked value='explanation_all'/>All</label><br>`);
                        $.each(data, function(key, item) {
                            $('#ExplanationChks').append(`<label for='explanation_checkbox_${item.Id}'><input class='explanation_checkbox' id="explanation_checkbox_${item.Id}" type="checkbox" checked value='${item.Id}'/>${item.ExplanationName}</label><br>`);

                        });
                    });
                $.getJSON('/api/Companies/')
                    .done(function(data) {
                        $('#CompanyChks').empty();
                        $('#CompanyChks').append(`<label for='chk_comopany_all'><input id="chk_comopany_all" type="checkbox" checked value='comopany_all'/>All</label>`);
                        $.each(data, function(key, item) {
                            $('#CompanyChks').append(`<label for='comopany_checkbox_${item.Id}'><input class='comopany_checkbox' id="comopany_checkbox_${item.Id}" type="checkbox" checked value='${item.Id}'/>${item.CompanyName}</label>`)
                        });
                    });
            }

            $('#section_registration').on('hidden.bs.modal', function () {
                var isPageLoad = $("#page_load_after_modal_close").val();
                if (isPageLoad == "yes") {
                    //SetRegistrationValueInHiddenField();
                    //window.location.reload(true);
                    //RetainRegistrationValue()
                    GetListDropdownValue();
                }
            })
            $('#department_registration').on('hidden.bs.modal', function () {
                var isPageLoad = $("#page_load_after_modal_close").val();
                if (isPageLoad == "yes") {
                    //SetRegistrationValueInHiddenField();
                    //window.location.reload(true);
                    //RetainRegistrationValue()
                    GetListDropdownValue();
                }
            })
            $('#in-charge_registration').on('hidden.bs.modal', function () {
                var isPageLoad = $("#page_load_after_modal_close").val();
                if (isPageLoad == "yes") {
                    //SetRegistrationValueInHiddenField();
                    //window.location.reload(true);
                    //RetainRegistrationValue();
                    GetListDropdownValue();
                }
            })
            $('#role_registration_modal').on('hidden.bs.modal', function () {
                var isPageLoad = $("#page_load_after_modal_close").val();
                if (isPageLoad == "yes") {
                    //SetRegistrationValueInHiddenField();
                    //window.location.reload(true);
                    //RetainRegistrationValue();
                    GetListDropdownValue();
                }
            })
            $('#explanation_modal').on('hidden.bs.modal', function () {
                var isPageLoad = $("#page_load_after_modal_close").val();
                if (isPageLoad == "yes") {
                    //SetRegistrationValueInHiddenField();
                    //window.location.reload(true);
                    //RetainRegistrationValue()
                    GetListDropdownValue();
                }
            })
            $('#company_reg_modal').on('hidden.bs.modal', function () {
                var isPageLoad = $("#page_load_after_modal_close").val();
                if (isPageLoad == "yes") {
                    //window.location.reload(true);
                    //RetainRegistrationValue()
                    GetListDropdownValue();
                }
            })

            var expanded = false;

            //Search: Get Sections
            $.getJSON('/api/Sections/')
                .done(function(data) {
                    $('#section').empty();
                    $('#section').append(`<option value=''>Select Section</option>`)
                    $.each(data, function(key, item) {
                        $('#section').append(`<option value='${item.Id}'>${item.SectionName}</option>`)
                    });
                });
            //Search: Get Department
            //$.getJSON('/api/Departments/')
            //    .done(function (data) {
            //        $('#department').empty();
            //        $('#department').append(`<option value=''>Select Department</option>`)
            //        $.each(data, function (key, item) {
            //            $('#department').append(`<option value='${item.Id}'>${item.DepartmentName}</option>`)
            //        });
            //    });
            //Search: Get In-Charge
            $.getJSON('/api/InCharges/')
                .done(function(data) {
                    $('#incharge').empty();
                    $('#incharge').append(`<option value=''>Select In-Charge</option>`)
                    $.each(data, function(key, item) {
                        $('#incharge').append(`<option value='${item.Id}'>${item.InChargeName}</option>`)
                    });
                });
            //Search: Get Roles
            $.getJSON('/api/Roles/')
                .done(function(data) {
                    $('#role').empty();
                    $('#role').append(`<option value=''>Select Role</option>`)
                    $.each(data, function(key, item) {
                        $('#role').append(`<option value='${item.Id}'>${item.RoleName}</option>`)
                    });
                });
            //Search: Get Company
            $.getJSON('/api/Companies/')
                .done(function(data) {
                    $('#company').empty();
                    $('#company').append(`<option value=''>Select Company</option>`)
                    $.each(data, function(key, item) {
                        $('#company').append(`<option value='${item.Id}'>${item.CompanyName}</option>`)
                    });
                });


        });

        //$('.container-fluid').click(function () {
        //    $('.commonselect').hide();
        //    //$(this).hide();
        //    alert("test");
        //});
        //$(document).on("click", function (event) {
        //    var $trigger = $("#sectionChks");
        //    if ($trigger !== event.target && !$trigger.has(event.target).length) {
        //        var checkboxes = document.getElementById("sectionChks");
        //        checkboxes.style.display = "none";
        //    }
        //});
    </script>
}